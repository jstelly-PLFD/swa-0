<!DOCTYPE html>

<html>
    <head>
    </head>
    <body>
        <script>
            function callOktaFlow(utoken, otoken, ftoken) {
                fetch("https://nisccoop.workflows.okta.com/api/flo/42216af84b7387dee26e1a72a89f805f/invoke", {
                  method: "POST",
                  body: JSON.stringify({
                    userToken: utoken,
                    offboardingToken: otoken,
                    flowToken: ftoken,
                    title: "check out these tokens",
                    completed: false
                  }),
                  headers: {
                    "Content-type": "application/json; charset=UTF-8"
                  }
                })
                .then(response => console.log(response.status || response)
                .then(response => response.text()
                .then(body => console.log(body));
            }
            
            function getQueryVariable(variable) {
                var query = window.location.search.substring(1);
                var vars = query.split('&');
                for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split('=');
                    if (decodeURIComponent(pair[0]).toLowerCase() == variable.toLowerCase()) {
                        return decodeURIComponent(pair[1]);
                    }
                }
                console.log('Query variable %s not found', variable);
            }

            callOktaFlow(getQueryVariable('uToken'), getQueryVariable('oToken'), getQueryVariable('fToken'))
            
            console.log(getQueryVariable('uToken'));
            console.log(getQueryVariable('oToken'));
            console.log(getQueryVariable('fToken'));
        </script>
        <span style="color: purple">Hello World!</span>
    </body>
</html>
